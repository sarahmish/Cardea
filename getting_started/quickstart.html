
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quickstart &#8212; Cardea 0.1.3.dev0 documentation</title>
    
  <link href="../_static/css/theme.css" rel="stylesheet" />
  <link href="../_static/css/index.f6b7ca918bee2f46fd9abac01cfb07d5.css" rel="stylesheet" />

    
  <link rel="stylesheet"
    href="../_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="../_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    
      

    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
  <link rel="preload" as="script" href="../_static/js/index.1e043a052b0af929e4d8.js">

    <script id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/language_data.js"></script>
    <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="User Guides" href="../user_guides/index.html" />
    <link rel="prev" title="Installation" href="install.html" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en" />
  </head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="80">
    
    <nav class="navbar navbar-light navbar-expand-lg bg-light fixed-top bd-navbar" id="navbar-main"><div class="container-xl">


    
    <a class="navbar-brand" href="../index.html">
      <p class="title">Cardea</p>
    </a>
    

    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbar-menu" aria-controls="navbar-menu" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>

    
    <div id="navbar-menu" class="col-lg-9 collapse navbar-collapse">
      <ul id="navbar-main-elements" class="navbar-nav mr-auto">
        <li class="toctree-l1 current active nav-item">
 <a class="reference internal nav-link" href="index.html">
  Getting Started
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../user_guides/index.html">
  User Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../api_reference/index.html">
  API Reference
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../developer_guides/index.html">
  Developer Guides
 </a>
</li>

<li class="toctree-l1 nav-item">
 <a class="reference internal nav-link" href="../history.html">
  Release Notes
 </a>
</li>

        
      </ul>

      <ul id="navbar-icon-links" class="navbar-nav" aria-label="Icon Links">
        <li class="nav-item">
          <a class="nav-link" href="https://github.com/MLBazaar/Cardea" rel="noopener" target="_blank" title="GitHub">
            <span><i class="fab fa-github-square"></i></span>
            <label class="sr-only">GitHub</label>
          </a>
        </li>
      </ul>
    </div>
</div>
    </nav>
    

    <div class="container-xl">
      <div class="row">
          
            
            <!-- Only show if we have sidebars configured, else just a small margin  -->
            <div class="col-12 col-md-3 bd-sidebar"><form class="bd-search d-flex align-items-center" action="../search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form>
<nav class="bd-links" id="bd-docs-nav" aria-label="Main navigation">
  <div class="bd-toc-item active">
    <ul class="current nav bd-sidenav">
 <li class="toctree-l2">
  <a class="reference internal" href="install.html">
   Installation
  </a>
 </li>
 <li class="toctree-l2 current active">
  <a class="current reference internal" href="#">
   Quickstart
  </a>
 </li>
</ul>
  </div>
</nav>
            </div>
            
          

          
          <div class="d-none d-xl-block col-xl-2 bd-toc">
              

<nav id="bd-toc-nav">
    
</nav>


              
          </div>
          

          
          
            
          
          <main class="col-12 col-md-9 col-xl-7 py-md-5 pl-md-5 pr-md-4 bd-content" role="main">
              
              <div>
                
  <div class="section" id="quickstart">
<h1>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">Â¶</a></h1>
<p>The first step to use Cardea is to follow the <a class="reference internal" href="install.html#installation"><span class="std std-ref">Installation</span></a> instructions. Once installed and
having a working environment, you can start using the Cardea library in a Python console
using the following steps:</p>
<p>First, load the core class to work with:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [1]: </span><span class="kn">from</span> <span class="nn">cardea</span> <span class="kn">import</span> <span class="n">Cardea</span>

<span class="gp">In [2]: </span><span class="n">cardea</span> <span class="o">=</span> <span class="n">Cardea</span><span class="p">()</span>
</pre></div>
</div>
<p>Second, load a dataset. By default, if no path is given, Cardea automatically loads a
pre-processed version of the Kaggle dataset: <a class="reference external" href="https://www.kaggle.com/joniarroba/noshowappointments">Medical Appointment No Shows</a>, using the
following command:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [3]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">load_entityset</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="s1">&#39;kaggle&#39;</span><span class="p">)</span>

<span class="gp">In [4]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">es</span>
<span class="gh">Out[4]: </span><span class="go"></span>
<span class="go">Entityset: fhir</span>
<span class="go">  Entities:</span>
<span class="go">    CodeableConcept [Rows: 4, Columns: 2]</span>
<span class="go">    Coding [Rows: 3, Columns: 2]</span>
<span class="go">    Address [Rows: 81, Columns: 2]</span>
<span class="go">    Reference [Rows: 6100, Columns: 1]</span>
<span class="go">    Identifier [Rows: 227151, Columns: 1]</span>
<span class="go">    Observation [Rows: 110527, Columns: 3]</span>
<span class="go">    Appointment_Participant [Rows: 6100, Columns: 2]</span>
<span class="go">    Patient [Rows: 6100, Columns: 4]</span>
<span class="go">    Appointment [Rows: 110527, Columns: 5]</span>
<span class="go">  Relationships:</span>
<span class="go">    CodeableConcept.coding -&gt; Coding.object_id</span>
<span class="go">    Observation.code -&gt; CodeableConcept.object_id</span>
<span class="go">    Observation.subject -&gt; Reference.identifier</span>
<span class="go">    Appointment_Participant.actor -&gt; Reference.identifier</span>
<span class="go">    Patient.address -&gt; Address.object_id</span>
<span class="go">    Appointment.participant -&gt; Appointment_Participant.object_id</span>
</pre></div>
</div>
<p>You can see the list of problem definitions and select one with the following commands:</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [5]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">list_problems</span><span class="p">()</span>
<span class="gh">Out[5]: </span><span class="go"></span>
<span class="go">{&#39;DiagnosisPrediction&#39;,</span>
<span class="go"> &#39;LengthOfStay&#39;,</span>
<span class="go"> &#39;MissedAppointment&#39;,</span>
<span class="go"> &#39;MortalityPrediction&#39;,</span>
<span class="go"> &#39;ProlongedLengthOfStay&#39;,</span>
<span class="go"> &#39;Readmission&#39;}</span>
</pre></div>
</div>
<p>From there, you can select the prediction problem you aim to solve by specifying the name of the class, which in return gives us the <code class="docutils literal notranslate"><span class="pre">label_times</span></code> of the problem.</p>
<div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [6]: </span><span class="n">label_times</span> <span class="o">=</span> <span class="n">cardea</span><span class="o">.</span><span class="n">select_problem</span><span class="p">(</span><span class="s1">&#39;MissedAppointment&#39;</span><span class="p">)</span>

<span class="gp">In [7]: </span><span class="n">label_times</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[7]: </span><span class="go"></span>
<span class="go">                       time  instance_id   label</span>
<span class="go">5642903 2016-04-29 18:38:08      5642903  noshow</span>
<span class="go">5642503 2016-04-29 16:08:27      5642503  noshow</span>
<span class="go">5642549 2016-04-29 16:19:04      5642549  noshow</span>
<span class="go">5642828 2016-04-29 17:29:31      5642828  noshow</span>
<span class="go">5642494 2016-04-29 16:07:23      5642494  noshow</span>
</pre></div>
</div>
<p>Then, you can perform the AutoML steps and take advantage of Cardea.</p>
<p>Cardea extracts features through automated feature engineering by supplying the <code class="docutils literal notranslate"><span class="pre">label_times</span></code> pertaining to the problem you aim to solve, using the following commands:</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [8]: </span><span class="n">feature_matrix</span> <span class="o">=</span> <span class="n">cardea</span><span class="o">.</span><span class="n">generate_features</span><span class="p">(</span><span class="n">label_times</span><span class="p">[:</span><span class="mi">1000</span><span class="p">])</span>  <span class="c1"># a subset</span>

<span class="gp">In [9]: </span><span class="n">feature_matrix</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
<span class="gh">Out[9]: </span><span class="go"></span>
<span class="go">   participant = 2680425062  participant = 4275143764  participant = 2615334244  participant = 2410824900  participant = 2406221984  participant = 1868414665  participant = 1692482157  participant = 1125465544  participant = 846537388  participant = 4121228070  participant is unknown  DAY(created) = 29  DAY(created) = 28  DAY(created) = 27  DAY(created) = 18  DAY(created) = 15  DAY(created) = 26  DAY(created) = 25  DAY(created) = 5  DAY(created) = 1  DAY(created) = 8  DAY(created) is unknown  DAY(start) = 29  DAY(start) is unknown  IS_WEEKEND(created)  IS_WEEKEND(start)  MONTH(created) = 4  MONTH(created) = 3  MONTH(created) = 2  MONTH(created) = 1  MONTH(created) is unknown  MONTH(start) = 4  MONTH(start) is unknown  WEEKDAY(created) = 4  WEEKDAY(created) = 2  WEEKDAY(created) = 1  WEEKDAY(created) = 3  WEEKDAY(created) = 0  WEEKDAY(created) is unknown  WEEKDAY(start) = 4  WEEKDAY(start) is unknown  YEAR(created) = 2016  YEAR(created) is unknown  YEAR(start) = 2016  YEAR(start) is unknown  Appointment_Participant.actor = 74200000000000  Appointment_Participant.actor = 713000000000000  Appointment_Participant.actor = 41400000000000  Appointment_Participant.actor = 28200000000000  Appointment_Participant.actor = 7270000000000  Appointment_Participant.actor = 7230000000000  Appointment_Participant.actor = 4920000000000  Appointment_Participant.actor = 3880000000000  Appointment_Participant.actor = 2760000000000  Appointment_Participant.actor = 735000000000000  Appointment_Participant.actor is unknown  Appointment_Participant.COUNT(Appointment)   label</span>
<span class="go">0                     False                     False                     False                     False                     False                     False                     False                     False                    False                     False                    True               True              False              False              False              False              False              False             False             False             False                    False             True                  False                False              False                True               False               False               False                      False              True                    False                  True                 False                 False                 False                 False                        False                True                      False                  True                     False                True                   False                                           False                                            False                                           False                                           False                                          False                                          False                                          False                                          False                                          False                                            False                                      True                                          39  noshow</span>
<span class="go">1                     False                     False                     False                     False                     False                     False                     False                     False                    False                     False                    True               True              False              False              False              False              False              False             False             False             False                    False             True                  False                False              False                True               False               False               False                      False              True                    False                  True                 False                 False                 False                 False                        False                True                      False                  True                     False                True                   False                                           False                                            False                                           False                                           False                                          False                                          False                                          False                                          False                                          False                                            False                                      True                                          27  noshow</span>
<span class="go">2                     False                     False                     False                     False                     False                     False                     False                     False                    False                     False                    True               True              False              False              False              False              False              False             False             False             False                    False             True                  False                False              False                True               False               False               False                      False              True                    False                  True                 False                 False                 False                 False                        False                True                      False                  True                     False                True                   False                                           False                                            False                                           False                                           False                                          False                                          False                                          False                                          False                                          False                                            False                                      True                                          55  noshow</span>
<span class="go">3                     False                     False                     False                     False                     False                     False                     False                     False                    False                     False                    True               True              False              False              False              False              False              False             False             False             False                    False             True                  False                False              False                True               False               False               False                      False              True                    False                  True                 False                 False                 False                 False                        False                True                      False                  True                     False                True                   False                                           False                                            False                                           False                                           False                                          False                                          False                                          False                                          False                                          False                                            False                                      True                                          39  noshow</span>
<span class="go">4                     False                     False                     False                     False                     False                     False                     False                     False                    False                     False                    True               True              False              False              False              False              False              False             False             False             False                    False             True                  False                False              False                True               False               False               False                      False              True                    False                  True                 False                 False                 False                 False                        False                True                      False                  True                     False                True                   False                                           False                                            False                                           False                                           False                                          False                                          False                                          False                                          False                                          False                                            False                                      True                                          28  noshow</span>
</pre></div>
</div>
</div></blockquote>
<p>Once we have the features, we can now split the data into training and testing</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [10]: </span><span class="n">y</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">feature_matrix</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s1">&#39;label&#39;</span><span class="p">))</span>

<span class="gp">In [11]: </span><span class="n">X</span> <span class="o">=</span> <span class="n">feature_matrix</span><span class="o">.</span><span class="n">values</span>

<span class="gp">In [12]: </span><span class="n">X_train</span><span class="p">,</span> <span class="n">X_test</span><span class="p">,</span> <span class="n">y_train</span><span class="p">,</span> <span class="n">y_test</span> <span class="o">=</span> <span class="n">cardea</span><span class="o">.</span><span class="n">train_test_split</span><span class="p">(</span>
<span class="gp">   ....: </span>    <span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">shuffle</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="gp">   ....: </span>
</pre></div>
</div>
</div></blockquote>
<p>Now that we have our feature matrix properly divided, we can use to train our machine learning pipeline, Modeling, optimizing hyperparameters and finding the most optimal model is done using the following commands:</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [13]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">select_pipeline</span><span class="p">(</span><span class="s1">&#39;Random Forest&#39;</span><span class="p">)</span>

<span class="gp">In [14]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">fit</span><span class="p">(</span><span class="n">X_train</span><span class="p">,</span> <span class="n">y_train</span><span class="p">)</span>

<span class="gp">In [15]: </span><span class="n">y_pred</span> <span class="o">=</span> <span class="n">cardea</span><span class="o">.</span><span class="n">predict</span><span class="p">(</span><span class="n">X_test</span><span class="p">)</span>
</pre></div>
</div>
</div></blockquote>
<p>Finally, you can see accuracy results using the following commands:</p>
<blockquote>
<div><div class="highlight-ipython notranslate"><div class="highlight"><pre><span></span><span class="gp">In [16]: </span><span class="n">cardea</span><span class="o">.</span><span class="n">evaluate</span><span class="p">(</span><span class="n">X</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">test_size</span><span class="o">=</span><span class="mf">0.2</span><span class="p">,</span> <span class="n">metrics</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;Accuracy&#39;</span><span class="p">,</span> <span class="s1">&#39;F1 Macro&#39;</span><span class="p">])</span>
<span class="gh">Out[16]: </span><span class="go">{&#39;Accuracy&#39;: 0.8, &#39;F1 Macro&#39;: 0.5579133510167994}</span>
</pre></div>
</div>
</div></blockquote>
</div>


              </div>
              
              
              <div class='prev-next-bottom'>
                
    <a class='left-prev' id="prev-link" href="install.html" title="previous page">Installation</a>
    <a class='right-next' id="next-link" href="../user_guides/index.html" title="next page">User Guides</a>

              </div>
              
          </main>
          

      </div>
    </div>

    
  <script src="../_static/js/index.1e043a052b0af929e4d8.js"></script>


    <footer class="footer mt-5 mt-md-0">
  <div class="container">
    <p>
          &copy; Copyright 2018, MIT Data To AI Lab.<br/>
        Created using <a href="http://sphinx-doc.org/">Sphinx</a> 3.2.1.<br/>
    </p>
  </div>
</footer>
  </body>
</html>